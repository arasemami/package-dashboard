<mat-card class="package-list-card mat-elevation-z4">
  <div class="toolbar">
    <mat-form-field appearance="outline" class="flex-item">
      <input matInput placeholder="Search" [formControl]="search" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="flex-item">
      <mat-select [formControl]="statusFilter">
        <mat-option value="all">All</mat-option>
        <mat-option value="active">Active</mat-option>
        <mat-option value="inactive">Inactive</mat-option>
        <mat-option value="pending">Pending</mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="goNew()">
      New Package
    </button>
    <button mat-stroked-button (click)="toggleLang()">
      Lang ({{ currentLang }})
    </button>
  </div>

  <div class="table-container">
    <table
      mat-table
      [dataSource]="(packages$ | async) ?? []"
      class="mat-table"
      matSort
    >
      <!-- ID -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>#</th>
        <td mat-cell *matCellDef="let p">{{ p.id }}</td>
      </ng-container>

      <!-- Name -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let p">
          {{ p | language : currentLang : "name" }}
        </td>
      </ng-container>

      <!-- Status -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let p">{{ p.status }}</td>
      </ng-container>

      <!-- Region -->
      <ng-container matColumnDef="region">
        <th mat-header-cell *matHeaderCellDef>Region</th>
        <td mat-cell *matCellDef="let p">{{ p.region }}</td>
      </ng-container>

      <!-- CreatedAt -->
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>Created</th>
        <td mat-cell *matCellDef="let p">
          {{ p.createdAt | date : "yyyy-MM-dd" }}
        </td>
      </ng-container>

      <!-- Description -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let p">
          {{ p | language : currentLang : "description" }}
        </td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let p">
          <a [routerLink]="['/packages', p.id]">View</a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns; trackBy: trackById"
      ></tr>
    </table>
  </div>
</mat-card>
